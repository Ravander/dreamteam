# Vaatimusmäärittely
Projektin tarkoituksena on simuloida rahapeliautomaattia, jossa käyttäjä pelaa erilaisia, enemmän tai vähemmän tuuriin perustuvia, pelejä rahapanoksella. Simulaation tarkoituksena on saada käsitys siitä, millä tavoin rahapeliä ylläpitävä taho varmistaa jäävänsä voitolle. Pelilogiikan täytyy olla sellainen, että keskimäärin pelaaja häviää enemmän kuin voittaa. Toisaalta pelaajalle täytyy antaa jokin kannustin pelaamisen jatkamiselle.
Projektin laajuudeksi päätettiin kolmen erilaisen rahapelin sekä niiden vaatimien muiden ominaisuuksien simulointi. Näin jokainen ryhmän jäsen saa simuloitavakseen yhden pelin sekä osan muista ominaisuuksista. Tämä toimintatapa tukee myös ohjelmoinnin oppimista, kun jokainen joutuu ohjelmoimaan sekä omaa osaansa, että yhteistä osaa. Jokaisen pelin täytyy sisältää oman erityistoiminallisuutensa lisäksi mahdollisuus asettaa panos ja yrittää voiton tuplausta. Työnjako toteutettiin niin, että Tuomas vastasi Tahti-luokasta, Joonas Keno-luokasta ja Jerry Ventti-luokasta. Loput luokat tehtiin yhdessä.

### Peli-luokka
Peli-luokka toimii pohjana simulaattorin kaikille peleille, eli Keno-, Tahti- ja Ventti-luokille, jotka periytyvät Peli-luokasta. Se tarjoaa valmiit mahdollisuudet esimerkiksi tuplaukselle, pelin jatkamiselle, syötteen lukemiselle ja sen oikeellisuuden tarkastamiselle sekä pelien satunnaisuudelle. Kaikki tämä on helposti Peli-luokan alaluokkien käytettävissä ja se tekee uusien pelien implementoinnista vaivatonta. Pelaajan syötteitä tarkastellaan mahdollisimman yksityiskohtaisesti, jotta simulaation suoritus on turvallista ja käyttäjäystävällistä. Tämä vähentää ohjelman kaatumisen riskiä huomattavasti ja ohjailee käyttäjää oikeaan suuntaan virheellisten yritysten jälkeen.

### Pelisimulaattori-luokka
Pelisimulaattori-luokka sisältää ohjelman main-funktion ja käynnistää näin ollen simulaation ja huolehtii sen etenemisestä. Huolehdittuaan alustuksesta, eli lyhyesti pelaajan ja muiden olioiden luonnista, main-funktio kutsuu valitsePeli-metodia, jonka palauttama valitun pelin nimi annetaan pelaa-metodin parametriksi. Pelaa-metodi on silta Pelisimulaattori-luokan ja Peli-luokan alaluokkien välillä. Pelisimulaattorissa kutsutaan valitun pelin pelaa-metodia käyttäjän määrittelemällä panoksella ja pelaajan rahamäärällä ja pidetään huoli pelaajan rahamäärän päivityksestä. Halutessaan käyttäjä voi myös pyytää lisätietoja pelaajasta, lisätä rahaa pelikoneeseen, tai ottaa rahat ja lopettaa pelaamisen.

### Pelaaja-luokka
Pelaaja-luokkaan tallennetaan pelaaja-olion tärkeimmät tiedot: nimi, ikä ja rahamäärä. Luokka on hyvin yksinkertainen, eikä sisällä konstruktoria ja luokkamuuttujien gettereitä ja settereitä lukuun ottamatta juurikaan muuta kuin parannellun toString-metodin, jota käytetään Pelisimulaattori-luokassa, jos pelaaja haluaa nähdä koneen tallentamat tiedot itsestään.

### Tahti-luokka
Tahti-luokka on Peli-luokan alaluokka, jossa on Tähti-pelin toiminnallisuus. Tarkoituksena on simuloida RAY:n Tähti-peliä mahdollisimman tarkasti käyttäen apuna merkkejä, kirjaimia ja numeroita. Kuten alkuperäisessä pelissä, voi simulaatiossakin lukita merkkejä paikoilleen numeroita syöttämällä. Muidenkin Peli-luokasta periytyneiden luokkien tapaan on Tähdessäkin mahdollisuus tuplata voitot sekä pelata uudestaan niin kauan kuin rahaa riittää.

### Keno-luokka
Keno-luokka on Tahti-luokan tapaan Peli-luokan alaluokka. Sen tarkoituksena on simuloida RAY:n Keno-peliä. Simulointi tapahtuu niin, että pelaaja valitsee ensin itselleen yhdeksän numeroa väliltä 1-40. Sen jälkeen tietokone arpoo yhdeksän numeroa samalta väliltä. Pelaaja voittaa, jos valituista numeroista vähintään neljä on samoja, kuin pelin arpomat numerot. Voittosumma on suurempi, mikäli osumia on useampi. Pelaaja voittaa myös siinä tapauksessa, jos yksikään valituista numeroista ei ole sama, kuin jokin pelin arpomista numeroista.

Keno-luokka sisältää yhteensä yhdeksän metodia. Nämä metodit ohjaavat koko pelin toimintaa ja lisäksi käytössä on muutamia myös muissa simulaation osissa käytettäviä metodeja Peli-luokasta. Keno-luokka sisältää viisi muuttujaa, jotka ovat oleellisia simulaattorin toiminnan kannalta. Lisäksi koodissa esiintyy myös muita pienempiä ns. apumuuttujia, jotka ovat jonkin koodin osan toiminnan kannalta pakollisia.

Simulaattorin toiminta alkaa pelaa-nimisestä metodista, jota kutsutaan ylemmästä luokasta. Pelaa-metodi huolehtii simulaattorin toiminnasta Keno-luokan sisällä. Ensimmäiseksi kutsutaan valitseNumerot-metodia, joka nimensä mukaan pyytää pelaajaa valitsemaan yhdeksän numeroa. Metodissa on tarkistus joka estää väärän syötteen esim. kirjaimen ja saman numeron valitsemisen kahteen kertaan. Numerot tallennetaan ArrayList- muuttujaan. Pelaajan saatua numeronsa valittua, kutsutaan arvoNumerot-metodia. Tämä arpoo yhdeksän numeroa toiseen ArrayList-muuttujaan. Tämän jälkeen osumienTarkistus-metodi tarkistaa kuinka monta numeroa pelaajan numeroista löytyy koneen arpomista numeroista. Tarkistuksen jälkeen simulaattori ilmoittaa voitetun summan. Summan ollessa isompi kuin nolla, se antaa mahdollisuuden tuplata voiton. Lopuksi muuttujat alustetaan mahdollista uutta pelikierrosta varten.

### Ventti-luokka
Ventti-luokka simuloi perinteistä ventti-korttipeliä, jossa pelataan jakajaa vastaan. Tavoitteena on päästä mahdollisimman lähelle summaa 21, kuitenkaan ylittämättä sitä. Luokan toiminta perustuu kolmeen ArrayListiin, jotka ovat pakka, jakajanKortit sekä pelaajanKortit. Pelin alussa kaikki ArrayListit alustetaan, minkä jälkeen pakkaan laitetaan kokonaisluvut 2-14, kukin neljä kertaa. Koska ventissä korttien mailla ei ole merkitystä, tässä simulaatiossa niitä ei huomioida lainkaan. Tämä mahdollistaa yksinkertaisemman toteutuksen, kun kortin ei tarvitse olla olio, jolla olisi numeroarvo ja maa-arvo.

Pelaajan ja jakajan käsiä käsitellään pelaajanKasi- ja jakajanKasi-metodien avulla. Metodit on toteutettu erikseen, sillä niiden toiminnallisuudet ovat hieman erilaiset. Jakaja ottaa lisää kortteja niin kauan, kuin käden arvo ei ylitä seitsemäätoista, kun taas pelaajalta kysytään jokaisen annetun kortin jälkeen, haluaako hän lisää kortteja. Nämä metodit kutsuvat jako-metodia, palauttaa arpomansa satunnaisen alkion pakka-ArrayLististä, sekä poistaa kyseisen alkion pakasta. Saatu kortti lisätään pelaajan tai jakajan käteen ArrayListin add-metodilla, minkä jälkeen käden arvo lasketaan kadenArvo-metodilla. kadenArvo-metodi saa parametrina pelivuorossa olevan tahon käden, laskee sen alkioiden arvot yhteen ja palauttaa summan.

Ventissä ässä on tarpeen mukaan arvoltaan joko 1 tai 14. Käytännössä ässän arvon kannattaa aina olla 14, ellei se aiheuta häviötä. Simulaatiossa ässät ovat aina oletusarvoisesti arvoltaan 14, ja ne vaihdetaan tarvittaessa kädessä ykkösiksi assanVaihto-metodilla. assanVaihto-metodia kutsutaan, mikäli käden arvo on yli 21 ja käsi sisältää alkion, jonka arvo on 14. Tällöin assanVaihto saa parametrinaan ässät vaihtavan tahon käden, minkä jälkeen se käy ArrayListin läpi muuttaen niiden alkoiden, joiden arvo on 14, arvot ykköseksi. Tämän jälkeen metodi palauttaa muokatun ArrayListin. Lopuksi pelaajanKasi- ja jakajanKasi-metodit palauttavat käden sisältämät ”kortit” ArrayList-muodossa.
kukaVoitti-metodi vertailee erilaisia mahdollisuuksia (pelaajan käden arvo on yli 21, pelaajan käden arvo on suurempi kuin jakajan käden arvo, jakajan käden arvo on suurempi kuin pelaajan käden arvo, käsien arvot ovat yhtä suuret), tulostaa tiedon voittajasta sekä palauttaa sen string-muodossa.

Luokan ”aloittavana” metodina toimii pelaa-metodi, joka saa parametreinaan panoksen sekä pelaajan rahamäärän. Pelaa-metodi huolehtii siitä, että pelaaja joko menettää tai saa rahaa pelin tuloksesta riippuen. Varsinaisesti peliä ohjailee kukaVoitti-metodi, jota pelaa-metodi kutsuu kysellen sitä, kumpi voitti. Pelaajan panos vähennetään rahamäärästä vasta häviön sattuessa. Tällöin voittotilanteessa ei rahamäärään lisätä panosta kaksinkertaisena, vaan pelkästään panos (koska rahamäärästä ei koskaan poistettu panosta). Näin ollen tasatilanteessa ei pelaajan rahamäärään kajota lainkaan. Luonnollisesti pelaa-metodi tarkistaa, että pelaajalla on varaa pelata, eli velaksi ei voi pelata. Metodi kertoo kunkin pelikierroksen jälkeen pelaajan rahamäärän, minkä jälkeen pelaaja voi joko jatkaa peliä tai lopettaa pelaamisen. Pelin loppuessa metodi palauttaa pelaajan senhetkisen rahamäärän.

# Luokkakaavio
Luokkakaavio on esitetty kuvassa 1. Kuvasuhteen vuoksi kuvan teksti on melko pientä Word-dokumentissa, joten kuva on myös erikseen saatavana.
